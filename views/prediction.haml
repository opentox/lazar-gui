.predictions
  .back
    %h1
      %img{:src=>"/images/arrow_left_float.png", :alt=>"arrow"}
        %a{:href => to('/predict')} New Prediction  
  / displays all prediction results
  .overview
    %table{:width=>"100%", :cellspacing=>"1", :id=>"overview"}
      %thead
        %tr
          %caption
            %h2 Prediction Results:
            %i= @identifier
      %tbody
        %tr
          %td{:id=>"compound"}
            %img{:src=>"#{@compound.uri}/image", :alt=>"image not available", :width=>"100"}
          - count=0
          / var for rule to load neighbours page.
          - @@neighbours_available = 1
          - @@predictions.each do |pa|
            / prediction of one model
            - pa.each do |p|
              / p.data_entries > 1 = neighbours available
              - $logger.debug "count data_entries: #{p.data_entries.length}"
              - p.data_entries.length > 1 ? @@neighbours_available = p.data_entries.length : @@neighbours_available
              %td{:class => p.data_entries[0][0]}
                %b{:class => "title"}
                  = @@prediction_models[count].title
                %br
                %br            
                  = "Result:\n"
                  %b= p.data_entries[0][0] != nil ? p.data_entries[0][0] : "No prediction result"
                %br
                  = "Confidence:\n"
                  = p.data_entries[0][1].round(3)
                %br
                %a{:href=> "#tabs", :id=>"link#{count}"}
                  %img{:src=>"/images/arrow_down_float.png", :alt=>"arrow"}
                  :javascript
                    $("a#link#{count}").click(function () {
                      $(".results").show();
                      document.getElementById('tabs').focus();
                      $("#tabs").tabs({ active: "#{count}" });
                    });
              - count+=1
  
- if @@neighbours_available > 1
  = haml :neighbours, :layout => false
- else
  %h2
    no neighbours available             
            
